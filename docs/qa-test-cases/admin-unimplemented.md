# 管理機能 — 未実装機能テストケース

> これらのテストケースは未実装機能（F-109〜F-111）のリリース時に使用する受け入れテストです。
> 実装完了後、仕様が確定した段階で前提条件・手順・期待結果を具体化してください。

---

## F-109 カバー画像設定

### TC-501 カバー画像設定: 画像ライブラリから選択してカバー画像を設定

| 項目 | 内容 |
|------|------|
| **機能ID** | F-109 |
| **カテゴリ** | 正常系 |

#### 前提条件

- 管理画面にアクセス可能である
- 画像が1件以上アップロード済みである（`/admin/images` に表示される）
- 記事エディタで下書きまたは公開記事を編集中である

#### 手順

1. 記事エディタ（`/admin/articles/{id}`）にアクセスする
2. カバー画像設定のUI（ボタンまたはエリア）をクリックする
3. 画像ライブラリが開くことを確認する
4. 任意の画像を選択する

#### 期待結果

- 画像ライブラリ（画像一覧）がモーダルまたはパネルとして表示される
- 画像を選択すると、カバー画像URLフィールドに選択した画像のimgix URLが設定される
- エディタ上でカバー画像のプレビューが表示される
- 記事を保存すると、カバー画像URLが永続化される

---

### TC-502 カバー画像設定: 設定済みカバー画像の変更

| 項目 | 内容 |
|------|------|
| **機能ID** | F-109 |
| **カテゴリ** | 正常系 |

#### 前提条件

- カバー画像が既に設定された記事が存在する
- 画像が2件以上アップロード済みである

#### 手順

1. カバー画像が設定された記事のエディタにアクセスする
2. 現在のカバー画像がプレビュー表示されていることを確認する
3. カバー画像設定のUIをクリックする
4. 別の画像を選択する
5. 記事を保存する

#### 期待結果

- カバー画像URLが新しい画像のURLに更新される
- プレビューが新しい画像に切り替わる
- 保存後、再読み込みしても新しいカバー画像が表示される

---

### TC-503 カバー画像設定: カバー画像の解除

| 項目 | 内容 |
|------|------|
| **機能ID** | F-109 |
| **カテゴリ** | 正常系 |

#### 前提条件

- カバー画像が既に設定された記事が存在する

#### 手順

1. カバー画像が設定された記事のエディタにアクセスする
2. カバー画像の削除/解除ボタンをクリックする
3. 記事を保存する

#### 期待結果

- カバー画像URLがクリアされる
- カバー画像のプレビューが非表示になる
- 保存後、記事詳細ページでカバー画像が表示されない

---

## F-110 本文への画像挿入

### TC-504 本文画像挿入: 画像ライブラリから選択してMarkdown挿入

| 項目 | 内容 |
|------|------|
| **機能ID** | F-110 |
| **カテゴリ** | 正常系 |

#### 前提条件

- 管理画面にアクセス可能である
- 画像が1件以上アップロード済みである
- 記事エディタで本文を編集中である

#### 手順

1. 記事エディタ（`/admin/articles/{id}`）にアクセスする
2. 本文のテキストエリアにカーソルを置く
3. 画像挿入のUI（ボタンまたはツールバーアイコン）をクリックする
4. 画像ライブラリから任意の画像を選択する

#### 期待結果

- 画像ライブラリが開く
- 画像を選択すると、本文のカーソル位置にMarkdown形式の画像タグが挿入される
  - 形式: `![alt_text](imgix_url)`
- 挿入後もテキストエリアの編集を継続できる

---

### TC-505 本文画像挿入: 挿入されたMarkdownがプレビューで画像表示される

| 項目 | 内容 |
|------|------|
| **機能ID** | F-110 |
| **カテゴリ** | 正常系 |

#### 前提条件

- TC-504 の手順で本文にMarkdown画像タグが挿入された状態

#### 手順

1. エディタのMarkdownプレビューエリアを確認する

#### 期待結果

- Markdownプレビューに画像が表示される
- 画像のURLがimgix CDN経由のURLである
- 記事を保存し、`features=local` + 記事詳細ページで確認すると、本文中に画像が表示される

---

## F-111 記事削除

### TC-506 記事削除: 下書き記事の削除

| 項目 | 内容 |
|------|------|
| **機能ID** | F-111 |
| **カテゴリ** | 正常系 |

#### 前提条件

- DBに下書き記事が1件存在する

#### 手順

1. 記事一覧（`/admin`）にアクセスする
2. 下書き記事の削除ボタン（または削除操作のUI）をクリックする
3. 確認ダイアログが表示された場合は確認する

#### 期待結果

- `draft_articles` テーブルから対象レコードが削除される
- 関連するカテゴリ（`draft_article_categories`）も削除される
- 記事一覧が更新され、削除した記事が表示されなくなる

#### 備考

- 現在はDB直接操作でのみ対応（仕様書 02-features.md F-111）

---

### TC-507 記事削除: 公開記事の削除

| 項目 | 内容 |
|------|------|
| **機能ID** | F-111 |
| **カテゴリ** | 正常系 |

#### 前提条件

- DBに公開記事が1件存在する

#### 手順

1. 記事一覧（`/admin`）にアクセスする
2. 公開記事の削除ボタン（または削除操作のUI）をクリックする
3. 確認ダイアログが表示された場合は確認する

#### 期待結果

- `published_articles` テーブルから対象レコードが削除される
- 関連するカテゴリ（`published_article_categories`）も削除される
- 記事一覧が更新され、削除した記事が表示されなくなる
- `features=local` 時のトップページで、削除した記事が表示されなくなる

---

### TC-508 記事削除: 削除後に記事一覧から消える

| 項目 | 内容 |
|------|------|
| **機能ID** | F-111 |
| **カテゴリ** | 正常系 |

#### 前提条件

- DBに記事（下書きまたは公開）が2件以上存在する

#### 手順

1. 記事一覧（`/admin`）にアクセスし、記事の件数を確認する
2. 任意の記事を削除する
3. 記事一覧を再確認する

#### 期待結果

- 記事一覧の件数が1件減っている
- 削除した記事のタイトルが一覧に存在しない
- 他の記事は影響を受けず表示されている

---

### TC-509 記事削除: 存在しない記事IDで削除を試みる

| 項目 | 内容 |
|------|------|
| **機能ID** | F-111 |
| **カテゴリ** | 異常系 |

#### 前提条件

- サーバーが起動している

#### 手順

1. 存在しない記事IDで削除APIを直接呼び出す（開発者ツール等から）

#### 期待結果

- 404エラーまたは適切なエラーメッセージが返される
- DBに影響がない
