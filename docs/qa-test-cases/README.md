# QAテストケース

## 概要

本ドキュメントは `docs/specification/` の仕様書に基づいて作成されたQAテストケース集です。
手動テストの実行に必要な前提条件・手順・期待結果を網羅しています。

### 対象外

以下は既存外部連携機能のため、本テストケースの対象外です。

- Qiita記事取得
- PR TIMES（WordPress）記事取得

### 未実装機能

以下は未実装機能のテストケースです。リリース時の受け入れテストとして使用します。

- F-109 カバー画像設定 → [admin-unimplemented.md](./admin-unimplemented.md)
- F-110 本文への画像挿入 → [admin-unimplemented.md](./admin-unimplemented.md)
- F-111 記事削除 → [admin-unimplemented.md](./admin-unimplemented.md)

---

## 凡例

| 項目 | 説明 |
|------|------|
| **TC-ID** | テストケース番号（カテゴリごとにプレフィックスが異なる） |
| **機能ID** | 仕様書の機能番号（`docs/specification/02-features.md`） |
| **カテゴリ** | 正常系 / 異常系 / 境界値 |
| **前提条件** | テスト実行前に満たすべき環境・データ・状態 |
| **手順** | 実行手順（番号付き） |
| **期待結果** | 確認すべき事項 |
| **備考** | 特記事項・仕様上の制約など |

### 環境情報

| 項目 | 値 |
|------|-----|
| 開発サーバー | `http://127.0.0.1:3000` |
| トップページ | `/` |
| 記事詳細 | `/articles/{slug}` |
| プレビュー | `/preview/{id}` |
| 管理画面 | `/admin` |
| 記事エディタ（新規） | `/admin/articles/new` |
| 記事エディタ（編集） | `/admin/articles/{id}` |
| 画像管理 | `/admin/images` |
| OAuth開始 | `/auth/google` |
| ログアウト | `/auth/logout` |

---

## テストケース一覧

### 公開画面 — [public-pages.md](./public-pages.md)

| TC-ID | 機能ID | カテゴリ | 概要 |
|-------|--------|---------|------|
| TC-001 | F-001 | 正常系 | トップページ: 記事一覧が新着順で表示される |
| TC-002 | F-001 | 正常系 | トップページ: features=local時にDB記事が含まれる |
| TC-003 | F-001 | 正常系 | トップページ: features=local時のキャッシュ無効化 |
| TC-004 | F-001 | 正常系 | トップページ: 通常時のキャッシュヘッダ確認 |
| TC-005 | F-002 | 正常系 | 記事詳細: 通常モードでNewt記事が表示される |
| TC-006 | F-002 | 正常系 | 記事詳細: features=localでDB記事がslugで表示される |
| TC-007 | F-002 | 正常系 | 記事詳細: features=localでNewtリダイレクトマッピング動作 |
| TC-008 | F-002 | 異常系 | 記事詳細: 存在しない記事で404表示 |
| TC-009 | F-002 | 正常系 | 記事詳細: OGPメタタグの設定確認 |
| TC-010 | F-003 | 正常系 | プレビュー: Newt未公開記事の表示 |
| TC-011 | F-003 | 異常系 | プレビュー: 存在しないIDで404表示 |
| TC-012 | F-003 | 正常系 | プレビュー: キャッシュ無効化ヘッダ確認 |

### 管理機能 — 記事 — [admin-articles.md](./admin-articles.md)

| TC-ID | 機能ID | カテゴリ | 概要 |
|-------|--------|---------|------|
| TC-101 | F-101 | 正常系 | 記事一覧: 下書き・公開記事が統合表示される |
| TC-102 | F-101 | 正常系 | 記事一覧: 各記事にエディタへのリンクがある |
| TC-103 | F-102 | 正常系 | 記事作成: 新規下書きが保存できる |
| TC-104 | F-102 | 正常系 | 記事作成: 下書き保存はバリデーションなし（空タイトル・空スラッグ許可） |
| TC-105 | F-103 | 正常系 | 記事編集: 下書き記事の読み込み・更新 |
| TC-106 | F-103 | 正常系 | 記事編集: 公開記事の読み込み・更新 |
| TC-107 | F-104 | 正常系 | 記事公開: 下書き→公開への変換 |
| TC-108 | F-104 | 異常系 | 記事公開: スラッグ空でバリデーションエラー |
| TC-109 | F-104 | 異常系 | 記事公開: スラッグ不正文字でバリデーションエラー |
| TC-110 | F-104 | 異常系 | 記事公開: スラッグ重複でエラー |
| TC-111 | F-103 | 異常系 | 公開記事保存: タイトル空でバリデーションエラー |
| TC-112 | F-103 | 境界値 | 公開記事保存: タイトル201文字でバリデーションエラー |
| TC-113 | F-103 | 境界値 | 公開記事保存: タイトル200文字で保存成功 |
| TC-114 | F-103 | 異常系 | 公開記事保存: スラッグ大文字でバリデーションエラー |
| TC-115 | F-103 | 異常系 | 公開記事保存: スラッグ重複（他記事）でエラー |
| TC-116 | F-103 | 正常系 | 公開記事保存: 自身のスラッグ保持は成功 |

### 管理機能 — 画像 — [admin-images.md](./admin-images.md)

| TC-ID | 機能ID | カテゴリ | 概要 |
|-------|--------|---------|------|
| TC-201 | F-105 | 正常系 | 画像一覧: アップロード済み画像がグリッド表示される |
| TC-202 | F-106 | 正常系 | 画像アップロード: JPEG画像のアップロード成功（3ステップ） |
| TC-203 | F-106 | 正常系 | 画像アップロード: PNG/GIF/WebPも成功 |
| TC-204 | F-106 | 異常系 | 画像アップロード: 許可外MIMEタイプでエラー |
| TC-205 | F-106 | 境界値 | 画像アップロード: 10MB超過でエラー |
| TC-206 | F-106 | 境界値 | 画像アップロード: 0バイトでエラー |
| TC-207 | F-106 | 正常系 | 画像アップロード: D&Dでアップロード |
| TC-208 | F-107 | 正常系 | 画像削除: DBレコード削除・一覧更新 |
| TC-209 | F-107 | 正常系 | 画像削除: GCSファイルは残存すること |
| TC-210 | F-108 | 正常系 | 画像URLコピー: imgix URLがクリップボードにコピー |

### 認証 — [auth.md](./auth.md)

| TC-ID | 機能ID | カテゴリ | 概要 |
|-------|--------|---------|------|
| TC-301 | F-201 | 正常系 | OAuth: ログインボタン→Google認証→管理画面リダイレクト |
| TC-302 | F-201 | 正常系 | OAuth: 未設定時は「認証なし」表示で操作可能 |
| TC-303 | F-201 | 正常系 | OAuth: 設定済み+未認証時はログインオーバーレイ表示 |
| TC-304 | F-202 | 正常系 | ログアウト: セッション削除→トップページリダイレクト |
| TC-305 | F-201 | 異常系 | OAuth: CSRFトークン不一致でエラーリダイレクト |
| TC-306 | — | 正常系 | features Cookie: トグルON→DB記事表示に切替 |
| TC-307 | — | 正常系 | features Cookie: トグルOFF→Newt記事表示に戻る |

### 管理機能 — 未実装 — [admin-unimplemented.md](./admin-unimplemented.md)

| TC-ID | 機能ID | カテゴリ | 概要 |
|-------|--------|---------|------|
| TC-501 | F-109 | 正常系 | カバー画像設定: 画像ライブラリから選択してカバー画像を設定 |
| TC-502 | F-109 | 正常系 | カバー画像設定: 設定済みカバー画像の変更 |
| TC-503 | F-109 | 正常系 | カバー画像設定: カバー画像の解除 |
| TC-504 | F-110 | 正常系 | 本文画像挿入: 画像ライブラリから選択してMarkdown挿入 |
| TC-505 | F-110 | 正常系 | 本文画像挿入: 挿入されたMarkdownがプレビューで画像表示される |
| TC-506 | F-111 | 正常系 | 記事削除: 下書き記事の削除 |
| TC-507 | F-111 | 正常系 | 記事削除: 公開記事の削除 |
| TC-508 | F-111 | 正常系 | 記事削除: 削除後に記事一覧から消える |
| TC-509 | F-111 | 異常系 | 記事削除: 存在しない記事IDで削除を試みる |

### キャッシュ制御 — [cache-control.md](./cache-control.md)

| TC-ID | 機能ID | カテゴリ | 概要 |
|-------|--------|---------|------|
| TC-401 | F-001 | 正常系 | トップページ: Cache-Controlヘッダの値が仕様通り |
| TC-402 | F-002 | 正常系 | 記事詳細: Cache-Controlヘッダの値が仕様通り |
| TC-403 | F-003 | 正常系 | プレビュー: Cache-Control=no-store,private |
| TC-404 | — | 正常系 | features=local: 全ページでキャッシュ無効化 |
